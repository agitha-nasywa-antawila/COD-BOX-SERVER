<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/css/main.min.css">
    {{#if styles}}
    {{#each styles}}
    <link rel="stylesheet" href="{{this}}">
    {{/each}}
    {{/if}}

</head>

<body>
    <nav class="flex sm:hidden justify-between items-center bg-blue-50 shadow-sm h-10 px-4">
        <p>Swift Parcel</p>
        <button class="" type="button" data-drawer-target="drawer-navigation" data-drawer-show="drawer-navigation"
            aria-controls="drawer-navigation">
            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5 7h14M5 12h14M5 17h14" />
            </svg>
        </button>
    </nav>

    <!-- drawer component -->
    <div id="drawer-navigation"
        class="fixed border-r-2 border-slate-100 top-0 left-0 z-40 w-64 h-screen flex flex-col p-4 transition-transform -translate-x-full bg-white dark:bg-gray-800 shadow-md"
        tabindex="-1" aria-labelledby="drawer-navigation-label">
        <h5 id="drawer-navigation-label" class="text-base font-semibold text-gray-500 uppercase dark:text-gray-400">Menu
        </h5>
        <button type="button" data-drawer-hide="drawer-navigation" aria-controls="drawer-navigation"
            class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 absolute top-2.5 end-2.5 inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white">
            <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    clip-rule="evenodd"></path>
            </svg>
            <span class="sr-only">Close menu</span>
        </button>
        <div class="py-4 overflow-y-auto grow">
            <ul class="space-y-2 font-medium">
                <li>
                    <a href="/kurir/pesanan/antar"
                        class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                        <svg class="w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"
                            aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M12.268 6A2 2 0 0 0 14 9h1v1a2 2 0 0 0 3.04 1.708l-.311 1.496a1 1 0 0 1-.979.796H8.605l.208 1H16a3 3 0 1 1-2.83 2h-2.34a3 3 0 1 1-4.009-1.76L4.686 5H4a1 1 0 0 1 0-2h1.5a1 1 0 0 1 .979.796L6.939 6h5.329Z" />
                            <path
                                d="M18 4a1 1 0 1 0-2 0v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0V8h2a1 1 0 1 0 0-2h-2V4Z" />
                        </svg>
                        <span class="ms-3">Terima Pesanan</span>
                    </a>
                </li>
                <li>
                    <a href="/kurir/pesanan/list"
                        class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                        <svg class="w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"
                            aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd"
                                d="M8 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1h2a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h2Zm6 1h-4v2H9a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2h-1V4Zm-3 8a1 1 0 0 1 1-1h3a1 1 0 1 1 0 2h-3a1 1 0 0 1-1-1Zm-2-1a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H9Zm2 5a1 1 0 0 1 1-1h3a1 1 0 1 1 0 2h-3a1 1 0 0 1-1-1Zm-2-1a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H9Z"
                                clip-rule="evenodd" />
                        </svg>

                        <span class="ms-3">Riwayat Pesanan</span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="h-16 p-3 flex bg-slate-100 shadow-sm rounded-sm border border-slate-200 mb-4">
            <svg class="w-6 h-6 text-gray-600 dark:text-white me-3" aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path fill-rule="evenodd"
                    d="M12 20a7.966 7.966 0 0 1-5.002-1.756l.002.001v-.683c0-1.794 1.492-3.25 3.333-3.25h3.334c1.84 0 3.333 1.456 3.333 3.25v.683A7.966 7.966 0 0 1 12 20ZM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10c0 5.5-4.44 9.963-9.932 10h-.138C6.438 21.962 2 17.5 2 12Zm10-5c-1.84 0-3.333 1.455-3.333 3.25S10.159 13.5 12 13.5c1.84 0 3.333-1.455 3.333-3.25S13.841 7 12 7Z"
                    clip-rule="evenodd" />
            </svg>
            <div>
                <p class="font-semibold text-gray-600" id="username">Username</p>
                <a class="text-red-500" href="/auth/logout">Logout</a>
            </div>
        </div>
        <button
            class="hidden sm:block absolute -right-[67px] top-1/3 -translate-y-1/2 rotate-90 bg-slate-100 px-6 py-2 rounded-t-sm"
            type="button" data-drawer-target="drawer-navigation" data-drawer-show="drawer-navigation"
            aria-controls="drawer-navigation">Menu</button>
    </div>

    {{{body}}}
</body>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        function getDataFromServer() {
            const url = "/api/v1/user/";

            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Data received from server:', data); // Log data yang diterima dari server

                    // Pastikan data sesuai dengan yang diharapkan
                    if (data && data.success && data.data && data.data.username) {
                        const usernameFromServer = data.data.username;

                        // Ambil elemen username
                        const usernameElement = document.getElementById("username");

                        // Pastikan elemen ditemukan sebelum mengisinya
                        if (usernameElement) {
                            console.log('Username element:', usernameElement);

                            // Set nilai teks elemen username dengan nilai dari server
                            usernameElement.textContent = usernameFromServer;
                        } else {
                            console.error('Element with ID "username" not found.');
                        }
                    } else {
                        console.error('Data received from server is invalid or does not contain username:', data);
                    }
                })
                .catch(error => {
                    console.error('There has been a problem with your fetch operation:', error);
                });
        }

        getDataFromServer(); // Panggil fungsi untuk mengambil data saat halaman dimuat
    });
</script>

<script src="/js/flowbite.js"></script>
<script src="/js/util/httpRequest.js"></script>
<script src="/js/util/timeformater.js"></script>
{{#if scripts}}
{{#each scripts}}
<script src="/js/{{this}}"></script>
{{/each}}
{{/if}}

</html>